<input type="checkbox" id="darkmode" class="check-darkmode" aria-label="Switch color theme" />
<label for="darkmode">
	<div class="image-check">
		<svg
			xmlns="http://www.w3.org/2000/svg"
			class="moon"
			x="0"
			y="0"
			width="100%"
			height="100%"
			viewBox="0 0 100 100"
			preserveAspectRatio="xMidYMid meet"
		>
			<path
				d="M82.1,61.2a31.9,31.9,0,0,1-12.4,2.4A33.3,33.3,0,0,1,36.4,30.3a31.9,31.9,0,0,1,2.4-12.4A33.3,33.3,0,1,0,82.1,61.2Z"
				fill="none"
				color="currentColor"
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="8"></path>
		</svg>

		<svg
			xmlns="http://www.w3.org/2000/svg"
			class="sun"
			x="0"
			y="0"
			width="100%"
			height="100%"
			viewBox="0 0 100 100"
			preserveAspectRatio="xMidYMid meet"
		>
			<path
				d="M50,18v3.6m0,56.8V82M82,50H78.4M21.6,50H18M72.6,72.6l-2.5-2.5M29.9,29.9l-2.5-2.5m45.2,0-2.5,2.5M29.9,70.1l-2.5,2.5M64.2,50A14.2,14.2,0,1,1,50,35.8,14.3,14.3,0,0,1,64.2,50Z"
				fill="none"
				stroke-linecap="round"
				color="currentColor"
				stroke-linejoin="round"
				stroke-width="8"></path>
		</svg>
	</div>
</label>

<script is:inline>
	const checkbox = document.querySelector('.check-darkmode');
	checkbox.checked = localStorage.getItem('darkMode') === 'true';

	checkbox.addEventListener('change', function (event) {
		localStorage.setItem('darkMode', event.currentTarget.checked);
	});
</script>

<style>
	input:focus-visible + label {
		outline-offset: 2px;
		outline: -webkit-focus-ring-color auto 1px;
		outline: 2px solid var(--text);
		border-radius: 6px;
	}
	label {
		margin-right: 1em;
		transition:
			outline-offset 0.2s ease,
			outline 0.2s ease;
	}
	.image-check {
		position: relative;
		width: 30px;
		height: 30px;
	}
	svg {
		position: absolute;
		inset: 0;
		stroke-width: 2px;
		cursor: pointer;
		stroke: var(--text);
		transition: opacity 0.3s ease;
	}
	svg:hover {
		animation: bounce 0.6s ease-in-out;
	}
	input {
		width: 1px;
		height: 1px;
		margin-top: -5px;
		border: 0;
		opacity: 0;
		position: absolute;
		top: 0;
		left: 0;
	}
	input:checked + label .moon {
		opacity: 1;
		visibility: visible;
	}
	input:checked + label .sun {
		opacity: 0;
		visibility: hidden;
	}
	.moon {
		opacity: 0;
		visibility: hidden;
	}
	@keyframes bounce {
		0% {
			transform: rotate(0deg);
		}
		25% {
			transform: rotate(8deg); /* Rotation vers la droite */
		}
		50% {
			transform: rotate(-8deg); /* Rotation vers la gauche */
		}
		75% {
			transform: rotate(5deg); /* Petite rotation à droite */
		}
		100% {
			transform: rotate(0deg); /* Retour à l'état de base */
		}
	}
</style>
